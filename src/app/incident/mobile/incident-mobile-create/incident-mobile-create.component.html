<div class="container-fluid incidentContainer p-0" id="MainContent" *ngIf="mainContentShow">

	<section class="incidentSection" (scroll)="scrolling($event);closeAllPanels();">
		<div class="d-flex justify-content-end row-padding-right">

		</div>
		<form [formGroup]="incidentForm" class="incidentCreateForm">
			<div class="">
				<div class=" paddTop incidentCreateView"
					[ngClass]="{'incidentCreateViewNew' : selectedUsers.length > 0}">
				
					<div
						class="form-group mb-0 auditFormsLbl auditFormsLbl1 incidentContents auditFormsLbl-new soteNamrLBL-1">

						<div class="ageDetails "
							*ngIf="(formFieldAccess.store.create || formFieldAccess.store.write || formFieldAccess.store.view) && !isPersonalInfoFormHidden">
							<div class="storeView" *ngIf="incidentData.isAdd">
								<label class="label-name storelabeltop">Store<span class="manditory"
										*ngIf="!isRedacted">*</span>
									<span *ngIf="!formFieldAccess.store.create && !formFieldAccess.store.write"
										class="labelValuepadd">
										{{incidentForm.value.storeName}}
									</span>
								</label>
								<div class="data-view customerName  d-grid">
									<div class="d-flex align-items-center">
										<!-- <select class="form-control store-width" formControlName="store"
											[ngClass]="isFieldValid('store')?'focus-border-error':''"
											*ngIf="formFieldAccess.store.create || formFieldAccess.store.write ">
											<option value="" disabled="disabled" class="option-first"></option>
											<option *ngFor="let str of storeData;" value="{{str.id}}">
												{{str.storeDescription}}
											</option>
										</select> -->
										<div class="data-view data-view-100 d-grid align-items-center"
											[ngClass]="isFieldValid('store') && formIncidentControls.store.errors!=null?'focus-border-error-new':''">
											<div class="d-flex align-items-center">
												<mat-form-field [floatLabel]="'never'"
													class="example-full-width incidentformfield incidentformfield-mobile incidentformfield-mobile-store store-width"
													*ngIf="formFieldAccess.store.create || formFieldAccess.store.write">
													<input type="text" aria-label="Store" matInput
														formControlName="storeName"
														class="form-control placeholder-class store-width store-width-tf multselecticonnew mat-form-field-mobile-input"
														(keyup)="storeType($event)" maxlength="100"
														(focus)="focusinmethod()" (focusout)="focusoutmethod()"
														placeholder="Type to auto suggest the store"
														[matAutocomplete]="auto" id="autoCompleteTrigger2"
														#autoCompleteTrigger2="matAutocompleteTrigger">

													<mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
														(optionSelected)="onStoreSelectionChanged($event)"
														class="mat-autocomplete-storeList">
														<mat-option *ngFor="let option of storeFilterData;"
															class="mat-option-storeList"
															[value]="option.storeDescription">
															{{option.storeDescription}}
														</mat-option>
													</mat-autocomplete>
												</mat-form-field>

												<span class="ps-2 store-mat-icon-top"
													*ngIf="formFieldAccess.store.create || formFieldAccess.store.write "
													placement="auto" [autoClose]="true"
													triggers="manual"
													#t="ngbTooltip"
													(click)="t.open()" ngbTooltip="{{toolTipData.store}}">
													<mat-icon>help_outline</mat-icon>
												</span>
											</div>
											<div class="error mg-top15" *ngIf="isFieldValid('store')">

												{{(formIncidentControls.store.errors!=null)?formIncidentControls.store.errors.message:''}}

											</div>
										</div>

										<!-- <span class="ps-2 "
											*ngIf="formFieldAccess.store.create || formFieldAccess.store.write " placement="auto"
												ngbTooltip="{{toolTipData.store}}">
											<mat-icon >help_outline</mat-icon>
										</span> -->
									</div>
								</div>
								<!-- <span class="error mb-0"
									*ngIf="isFieldValid('store')">{{(formIncidentControls.store.errors!=null)?formIncidentControls.store.errors.message:''}}</span> -->
							</div>

						</div>

						<div class="personal-info-title personalInfoCls d-block"
							[ngClass]="{'personal-info-title-reducted' : isRedacted || isIncidentClosed}">1. Personal
							Information</div>
						<div class="personal-info-form" [hidden]="isPersonalInfoFormHidden">
							<div class="nameCls">
								<div class="nameInjured">
									<div class=""
										*ngIf="formFieldAccess.injuredPersonFullName.create || formFieldAccess.injuredPersonFullName.write || formFieldAccess.injuredPersonFullName.view">
										<label class="label-name">Name of the injured<span class="manditory"
												*ngIf="!isRedacted">*</span>
											<span class=" "
												[ngClass]="isRedacted?' redacted-background':'labelValuepadd'"
												*ngIf="(!formFieldAccess.injuredPersonFullName.create && !formFieldAccess.injuredPersonFullName.write ) || isRedacted">{{(!isRedacted)?incidentForm.value.injuredPersonFullName:'REDACTED'}}
											</span></label>
										<div class="d-grid">
											<div class="d-flex align-items-center">
												<input type="text" class="form-control customerName" autocomplete="off"
													maxlength="60" formControlName="injuredPersonFullName"
													(keypress)="common.textBoxAllowAplpabetsSpaceOnly($event)"
													[ngClass]="isFieldValid('injuredPersonFullName')?'focus-border-error':''"
													*ngIf="(formFieldAccess.injuredPersonFullName.create || formFieldAccess.injuredPersonFullName.write) && !isRedacted">

												<span class="ps-2 ageIcon"
													*ngIf="(formFieldAccess.injuredPersonFullName.create || formFieldAccess.injuredPersonFullName.write ) && !isRedacted"
													placement="auto" [autoClose]="true"
													triggers="manual"
													#t="ngbTooltip"
													(click)="t.open()" ngbTooltip="{{toolTipData.injuredPersonFullName}}">
													<mat-icon>help_outline</mat-icon>
												</span>
											</div>
											<span class="error mb-0"
												*ngIf="isFieldValid('injuredPersonFullName')">{{(formIncidentControls.injuredPersonFullName.errors!=null)?formIncidentControls.injuredPersonFullName.errors.message:''}}</span>
										</div>

									</div>
								</div>
								<div class=""
									*ngIf="incidentSelectedTypeData.name=='Product' && (formFieldAccess.complainant.create || formFieldAccess.complainant.write || formFieldAccess.complainant.view)">
									<div class="">
										<label class="label-name">Complainant<span class="manditory"
												*ngIf="!isRedacted">*</span><span
												*ngIf="(!formFieldAccess.complainant.create && !formFieldAccess.complainant.write) || isRedacted"
												class=""
												[ngClass]="isRedacted?'redacted-background':'labelValuepadd'">{{(!isRedacted)?incidentForm.value.productComplaint:'REDACTED'}}
											</span></label>
										<div class="data-view d-grid " *ngIf="!isRedacted">
											<div class="d-flex align-items-center">
												<input type="text" class="form-control customerName" autocomplete="off"
													maxlength="60" formControlName="productComplaint"
													[ngClass]="isFieldValid('productComplaint')?'focus-border-error':''"
													(keypress)="common.textBoxAllowAplpabetsSpaceOnly($event)"
													*ngIf="(formFieldAccess.complainant.create || formFieldAccess.complainant.write) && !isRedacted">

												<span class="ps-2 ageIcon"
													*ngIf="(formFieldAccess.complainant.create || formFieldAccess.complainant.write) && !isRedacted"
													placement="auto" [autoClose]="true"
													triggers="manual"
													#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.complainant}}">
													<mat-icon>help_outline</mat-icon>
												</span>
											</div>
											<span class="error mb-0"
												*ngIf="isFieldValid('productComplaint')">{{(formIncidentControls.productComplaint.errors!=null)?formIncidentControls.productComplaint.errors.message:''}}</span>

										</div>
									</div>
								</div>



							</div>
							<div class="d-flex ageDetails align-items-center ageView mobilewrap-flex"
								[ngClass]="isRedacted?'margin-reduce':'d-flex ageDetails align-items-center ageView'">
								<!-- 	<div class="">
								<label>Age</label>
								<div class="data-view">
									<input type="text" class="form-control ageInput" autocomplete="off"
										maxlength="3">

								</div>
							</div> -->
								<div class="mtop-15"
									*ngIf="formFieldAccess.ageDropdown.create || formFieldAccess.ageDropdown.write || formFieldAccess.ageDropdown.view">
									<label class="label-name yearLbl agelablel">Age<span class="manditory"
											*ngIf="!isRedacted">*</span><span
											*ngIf="(!formFieldAccess.ageDropdown.create && !formFieldAccess.ageDropdown.write) || isRedacted"
											class=" "
											[ngClass]="isRedacted?'redacted-background':'labelValuepadd'">{{(!isRedacted)?incidentForm.value.ageValue:'REDACTED'}}
										</span></label>
									<div class="data-view data-view-90 d-grid" *ngIf="!isRedacted">
										<input type="text" class="form-control ageInput" autocomplete="off"
											maxlength="2" formControlName="ageValue"
											(keypress)="common.allowNumberOnly($event)"
											(change)="ageValueChange($event)"
											[ngClass]="isFieldValid('ageValue')?'focus-border-error':''"
											*ngIf="(formFieldAccess.ageDropdown.create || formFieldAccess.ageDropdown.write) && !isRedacted">
										<span class="error mb-0" *ngIf="isFieldValid('ageValue')">
											{{(formIncidentControls.ageValue.errors!=null)?formIncidentControls.ageValue.errors.message:''}}
										</span>
									</div>

								</div>
								<div class="mtop-15"
									*ngIf="formFieldAccess.ageDropdown.create || formFieldAccess.ageDropdown.write || formFieldAccess.ageDropdown.view">
									<label class="label-name agelablel1"><span
											*ngIf="(!formFieldAccess.ageDropdown.create && !formFieldAccess.ageDropdown.write) || isRedacted"
											class=" store-width">
											{{(!isRedacted)?incidentForm.value.ageType:''}}
										</span> </label>
									<div class="data-view d-grid ageDD" *ngIf="!isRedacted">
										<select id="agetype" class="agetypeSelect" #agetype formControlName="ageType"
											(change)="ageTypeChange($event)" class="ageInput1"
											[ngClass]="isFieldValid('ageType')?'focus-border-error':''"
											*ngIf="(formFieldAccess.ageDropdown.create || formFieldAccess.ageDropdown.write) && !isRedacted">

											<!-- <option value="">Select</option> -->
											<option value="Year">Years</option>
											<option value="Month">Months</option>
										</select>

										<span class="error mb-0"
											*ngIf="isFieldValid('ageType')">{{(formIncidentControls.ageType.errors!=null)?formIncidentControls.ageType.errors.message:''}}</span>
									</div>

								</div>
								<!-- need to check -->
								<div class="checkbox-middle"
									*ngIf="formFieldAccess.ageDropdown.create || formFieldAccess.ageDropdown.write || formFieldAccess.ageDropdown.view">
									<label class="label-name"></label>
									<div class="data-view d-flex align-items-center approxVal approxValNew w-auto ageCheckBox"
										*ngIf="!isRedacted">
										<mat-checkbox class="aligncheckbox incidentagecheckbox" autocomplete="off"
											formControlName="appropriateAge"
											*ngIf="formFieldAccess.ageDropdown.create || formFieldAccess.ageDropdown.write">
										</mat-checkbox>
										<span class="text-approximate text-approximate-pad1"
											*ngIf="formFieldAccess.ageDropdown.create || formFieldAccess.ageDropdown.write || formFieldAccess.ageDropdown.view">Age
											Approximate</span>
										<span class="ps-1 ageIcon"
											*ngIf="formFieldAccess.ageDropdown.create || formFieldAccess.ageDropdown.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.ageAppropriate}}">
											<mat-icon>help_outline</mat-icon></span>
									</div>
								</div>

								

							</div>
							<div class=""
							*ngIf="incidentForm.value.ageType!='' && incidentForm.value.ageValue!='' && !isRedacted && incidentForm.value.calculatedAge<18">
							<!-- +' -*ngIf="!isRedacted"
								('+(dateOfAdult
								| date:'dd-MM-yyyy')+ ' is Major)' -->
							<div class="data-view text-approximate text-approximate-new">
								<span class="case-type"
									*ngIf="dateOfAdult!='' && dateOfAdult!=null && ageMessage!=''">
									Case Type: <span class="age-message">{{ageMessage}}</span></span>
								<span class="case-type"
									*ngIf="dateOfAdult=='' && dateOfAdult==null && ageMessage!=''">Case Type:
									<span class="age-message">{{ageMessage}}</span></span>
							</div>
						</div>
							<!--NEW GENDER VALUE-->
							<div class="d-flex contactDetails" *ngIf="incidentSelectedTypeData.name =='Product'"
							[ngClass]="isRedacted?'margin-reduce':'genderview d-flex contactDetails'">
							<div class=""
								*ngIf="formFieldAccess.genderType.create || formFieldAccess.genderType.write || formFieldAccess.genderType.view">
								<label class="label-name">Gender<span
										*ngIf="(!formFieldAccess.genderType.create && !formFieldAccess.genderType.write) || isRedacted"
										class=""
										[ngClass]="isRedacted?' redacted-background':'labelValuepadd'">{{(!isRedacted)?incidentForm.value.genderType:'REDACTED'}}
									</span></label>
									<div class="data-view d-grid ageDDNew d-flex align-items-center" *ngIf="!isRedacted">
										<select id="genderType" class="agetypeSelect agetypeSelectwidth ageInput2" #agetype formControlName="genderType"
											(change)="genderTypeChange($event)" 
											*ngIf="(formFieldAccess.genderType.create || formFieldAccess.genderType.write) && !isRedacted">

											<!-- <option value="">Select</option> -->
											<option value="Male">Male</option>
											<option value="Female">Female</option>
										</select>
										<span class="ps-2 ageIcon"
										*ngIf="(formFieldAccess.genderType.create || formFieldAccess.genderType.write) && !isRedacted"
										placement="auto" [autoClose]="true"
										triggers="manual"
										#t="ngbTooltip"
										(click)="t.open()" ngbTooltip="{{toolTipData.genderType}}">
										<mat-icon>help_outline</mat-icon>
									</span>
				
									</div>
								
							</div>
						</div>


							<div class="d-flex contactDetails"
								[ngClass]="isRedacted?'margin-reduce':'d-flex contactDetails'">
								<div class="width-100"
									*ngIf="formFieldAccess.injuredPersonContactNo.create || formFieldAccess.injuredPersonContactNo.write || formFieldAccess.injuredPersonContactNo.view">
									<label class="label-name">Contact Number {{(incidentSelectedTypeData.name =='Product' || incidentSelectedTypeData.name == 'Customer') ?'(parent’s, if injured person is a child)':''}}<span class="manditory"
											*ngIf="!isRedacted">*</span> <span
											*ngIf="(!formFieldAccess.injuredPersonContactNo.create && !formFieldAccess.injuredPersonContactNo.write) || isRedacted"
											class=""
											[ngClass]="isRedacted?' redacted-background':'labelValuepadd'">{{(!isRedacted)?incidentForm.value.injuredPersonContactNumber:'REDACTED'}}
										</span></label>
									<div class="data-view  d-grid" *ngIf="!isRedacted">
										<div class="d-flex align-items-center">
											<input type="text" class="form-control contactNo customerName"
												autocomplete="off" maxlength="15"
												formControlName="injuredPersonContactNumber"
												(keypress)="common.allowNumberAndSpecialChars($event)"
												[ngClass]="isFieldValid('injuredPersonContactNumber')?'focus-border-error':''"
												*ngIf="(formFieldAccess.injuredPersonContactNo.create || formFieldAccess.injuredPersonContactNo.write) && !isRedacted">

											<span class="ps-2"
												*ngIf="(formFieldAccess.injuredPersonContactNo.create || formFieldAccess.injuredPersonContactNo.write) && !isRedacted"
												placement="auto" [autoClose]="true"
												triggers="manual"
												#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.injuredPersonContactNo}}">
												<mat-icon>help_outline</mat-icon>
											</span>
										</div>
										<span class="error"
											*ngIf="isFieldValid('injuredPersonContactNumber')">{{(formIncidentControls.injuredPersonContactNumber.errors!=null)?formIncidentControls.injuredPersonContactNumber.errors.message:''}}</span>
									</div>

								</div>
							</div>
							<div class="d-flex contactDetails"
								[ngClass]="isRedacted?'margin-reduce':'d-flex contactDetails'">
								<div [ngClass]="{'emailContact' : !isRedacted}"
									*ngIf="formFieldAccess.emailAddress.create || formFieldAccess.emailAddress.write || formFieldAccess.emailAddress.view"
									[ngClass]="isRedacted?'height-reduce':'emailContact'">
									<label class="label-name">Contact Email<span class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name!='Customer' && incidentSelectedTypeData.name!='Product'">*</span>
										<span
											*ngIf="(!formFieldAccess.emailAddress.create && !formFieldAccess.emailAddress.write) || isRedacted"
											class=""
											[ngClass]="isRedacted?'redacted-background':'labelValuepadd'">{{(!isRedacted)?incidentForm.value.injuredPersonEmail:'REDACTED'}}
										</span></label>
									<div class="data-view d-grid" *ngIf="!isRedacted">
										<div class="d-flex align-items-center">
											<input type="text" class="form-control contactNo customerName"
												autocomplete="off" maxlength="60" formControlName="injuredPersonEmail"
												[ngClass]="isFieldEmailValid('injuredPersonEmail',incidentSelectedTypeData.name)?'focus-border-error':''"
												*ngIf="(formFieldAccess.emailAddress.create || formFieldAccess.emailAddress.write) && !isRedacted">

											<span class="ps-2"
												*ngIf="(formFieldAccess.emailAddress.create || formFieldAccess.emailAddress.write) && !isRedacted"
												placement="auto" [autoClose]="true"
												triggers="manual"
												#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.emailAddress}}">
												<mat-icon>help_outline</mat-icon>
											</span>
										</div>
										<span class="error mb-0"
											*ngIf="isFieldEmailValid('injuredPersonEmail',incidentSelectedTypeData.name)">{{(formIncidentControls.injuredPersonEmail.errors!=null)?formIncidentControls.injuredPersonEmail.errors.message:''}}</span>
									</div>
								</div>
							</div>

							<div class="ageDetails" [ngClass]="isRedacted?'margin-reduce':'ageDetails'">
								<div class=""
									*ngIf="formFieldAccess.address.create || formFieldAccess.address.write || formFieldAccess.address.view">
									<label class="label-name">Address<span
											*ngIf="(!formFieldAccess.address.create && !formFieldAccess.address.write)  || isRedacted"
											class=""
											[ngClass]="isRedacted?' redacted-background':'labelValuepadd'">{{(!isRedacted)?incidentForm.value.injuredPersonAddress:'REDACTED'}}
										</span></label>
									<div class="data-view" *ngIf="!isRedacted">
										<div class="data-view d-flex align-items-center ">
											<textarea class="form-control textarea addressArea" autocomplete="off"
												maxlength="250" formControlName="injuredPersonAddress"
												*ngIf="(formFieldAccess.address.create || formFieldAccess.address.write) && !isRedacted"></textarea>

											<span class="ps-2"
												*ngIf="(formFieldAccess.address.create || formFieldAccess.address.write) && !isRedacted"
												placement="auto" [autoClose]="true"
												triggers="manual"
												#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.address}}">
												<mat-icon>help_outline</mat-icon> </span>
										</div>
									</div>
								</div>
							</div>

							<!-- <div class="d-flex significientName" [ngClass]="{'significientNameNew' : isRedacted}"
								*ngIf="incidentSelectedTypeData.name=='Customer' && incidentForm.value.calculatedAge>18">
								<div class=""
									*ngIf="formFieldAccess.significantOther.create || formFieldAccess.significantOther.write || formFieldAccess.significantOther.view">
									<label class="label-name">Parent/Guardian/Responsible person <span
											*ngIf="!formFieldAccess.significantOther.create && !formFieldAccess.significantOther.write"
											class=" labelValuepadd">
											{{incidentForm.value.significantOthers}}
										</span></label>
									<div class="data-view d-flex align-items-center otherInfo">
										<input type="text" class="form-control customerName" autocomplete="off"
											maxlength="60" formControlName="significantOthers"
											(keypress)="common.textBoxAllowAplpabetsSpaceOnly($event)"
											*ngIf="formFieldAccess.significantOther.create || formFieldAccess.significantOther.write">

										<span class="signIcon"
											*ngIf="formFieldAccess.significantOther.create || formFieldAccess.significantOther.write " 
												placement="auto"
												ngbTooltip="{{toolTipData.significantOthers}}"><mat-icon>help_outline</mat-icon></span>

									</div>
									<span class="error mb-0" *ngIf="isFieldValid('significantOthers')">
										{{(formIncidentControls.significantOthers.errors!=null)?formIncidentControls.significantOthers.errors.message:''}}
									</span>
								</div>
							</div> -->

						</div>
						<!-- perfornal info view -->
						<div class="" [hidden]="isPersonalInfoViewHidden">
							<app-personal-info-view *ngIf="!isPersonalInfoViewHidden"
								[personalInfoData]="personalInfoView"></app-personal-info-view>

						</div>

					</div>
					<div class="detailView">
<div class="personal-info-title"
[ngClass]="{'personal-info-title-reducted' : isRedacted || isIncidentClosed}">2. Incident
							Details</div>

						<div class=" incident-details-form " [hidden]="isIncidentDetailsFormHidden">
							<div class="d-flex accidentDetails mobilewrap-flex" *ngIf="!isIncidentDetailsFormHidden">
								<div class=""
									*ngIf="formFieldAccess.eventDateTime.create || formFieldAccess.eventDateTime.write || formFieldAccess.eventDateTime.view">
									<label class="label-name">Incident Date<span class="manditory"
											*ngIf="!isRedacted">*</span><span
											*ngIf="!formFieldAccess.eventDateTime.create || !formFieldAccess.eventDateTime.write">
											{{incidentForm.value.eventDate | date:'dd-MM-yyyy'}}</span></label>
									<div class="data-view dataiconrel"
										*ngIf="formFieldAccess.eventDateTime.create || formFieldAccess.eventDateTime.write">

										<input type="text" id="scrolldatepicker" class="form-control dateInput"
											autocomplete="off" maxlength="10" formControlName="eventDate"
											placeholder="DD/MM/YYYY"
											[ngClass]="isFieldValid('eventDate')?'focus-border-error':''"
											[minDate]="incidentMinDate" [maxDate]="incidentMaxDate"
											(bsValueChange)="eventDateChange($event);closebsValue()" autocomplete="off"
											bsDatepicker [bsConfig]="common.bsConfig" #eventDate>


										<div class="data-icon" (click)="eventDate.click();">
											<img src="assets/healthsafetyimages/field-icon.svg">
										</div>

									</div>
									<div class="error" *ngIf="isFieldValid('eventDate')">
										{{(formIncidentControls.eventDate.errors!=null)?formIncidentControls.eventDate.errors.message:''}}
									</div>
								</div>
								<div class=""
									*ngIf="formFieldAccess.eventDateTime.create || formFieldAccess.eventDateTime.write || formFieldAccess.eventDateTime.view">
									<label class="label-name">Time<span class="manditory"
											*ngIf="!isRedacted">*</span><span
											*ngIf="!formFieldAccess.eventDateTime.create || !formFieldAccess.eventDateTime.write">{{incidentForm.value.eventTime}}</span></label>
									<div class="data-view"
										*ngIf="formFieldAccess.eventDateTime.create || formFieldAccess.eventDateTime.write">
										<input type="text" class="form-control timeInput" autocomplete="off"
											maxlength="5" formControlName="eventTime" placeholder="HH:MM"
											[ngClass]="isFieldValid('eventTime')?'focus-border-error':''"
											(keyup)="incidentTimeKeyUp()" (keypress)="common.allowNumberOnly($event)">
									</div>
									<div class="error" *ngIf="isFieldValid('eventTime')">
										{{(formIncidentControls.eventTime.errors!=null)?formIncidentControls.eventTime.errors.message:''}}
									</div>
								</div>
								<div class="d-flex align-items-center confirmContent checkbox-middle"
									*ngIf="formFieldAccess.eventDateApproximate.create || formFieldAccess.eventDateApproximate.write || formFieldAccess.eventDateApproximate.view">
									<label class="label-name"></label>
									<div class="data-view d-flex align-items-center mb-0 approxVal ageCheckBox">
										<mat-checkbox autocomplete="off" formControlName="approximateDate"
											class="incidentagecheckbox"
											*ngIf="formFieldAccess.eventDateApproximate.create || formFieldAccess.eventDateApproximate.write"></mat-checkbox>
										<span class="text-approximate"
											*ngIf="formFieldAccess.eventDateApproximate.create || formFieldAccess.eventDateApproximate.write">Approximate</span>
										<span class="ps-2 ageIcon"
											*ngIf="formFieldAccess.eventDateApproximate.create || formFieldAccess.eventDateApproximate.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.approximate}}">
											<mat-icon>help_outline</mat-icon></span>
									</div>
								</div>

							</div>
							<div class="d-flex accidentDetails mobilewrap-flex">
								<!-- {{incidentForm.value.reportedDate | date:'dd-MM-yyyy'}} -->
								<div class=""
									*ngIf="formFieldAccess.reportedDateTime.create || formFieldAccess.reportedDateTime.write || formFieldAccess.reportedDateTime.view">
									<label class="label-name">Reported Date<span class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product'">*</span><span
											*ngIf="!formFieldAccess.reportedDateTime.create && !formFieldAccess.reportedDateTime.write">{{incidentForm.value.reportedDate
											| date:'dd-MM-yyyy'}}</span></label>
									<div class="data-view dataiconrel"
										*ngIf="formFieldAccess.reportedDateTime.create || formFieldAccess.reportedDateTime.write">
										<input type="text" class="form-control dateInput" autocomplete="off"
											maxlength="10" formControlName="reportedDate"
											[ngClass]="isFieldValid('reportedDate') && ( incidentSelectedTypeData.name=='Product')?'focus-border-error':''"
											placeholder="DD/MM/YYYY" [minDate]="reportedMinDate"
											[maxDate]="reportedMaxDate" autocomplete="off" bsDatepicker
											[bsConfig]="common.bsConfig" #reportedDate>
										<div class="data-icon" (click)="reportedDate.click()">
											<img src="assets/healthsafetyimages/field-icon.svg">
										</div>

									</div>
									<div class="error"
										*ngIf="isFieldValid('reportedDate') && ( incidentSelectedTypeData.name=='Product')">
										{{(formIncidentControls.reportedDate.errors!=null)?formIncidentControls.reportedDate.errors.message:''}}
									</div>
								</div>
								<div class=""
									*ngIf="formFieldAccess.reportedDateTime.create || formFieldAccess.reportedDateTime.write || formFieldAccess.reportedDateTime.view">
									<label class="label-name">Time<span class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product'">*</span>
										<span
											*ngIf="!formFieldAccess.reportedDateTime.create || !formFieldAccess.reportedDateTime.write">{{incidentForm.value.reportedTime}}</span></label>
									<div class="data-view d-flex align-items-center"
										*ngIf="formFieldAccess.reportedDateTime.create || formFieldAccess.reportedDateTime.write">
										<input type="text" class="form-control timeInput" autocomplete="off"
											maxlength="5" formControlName="reportedTime" placeholder="HH:MM"
											(keyup)="reportedTimeKeyUp()"
											[ngClass]="isFieldValid('reportedTime') && ( incidentSelectedTypeData.name=='Product') && (formIncidentControls.reportedTime.errors!=null)?'focus-border-error':''"
											(keyup)="incidentTimeKeyUp()" (keypress)="common.allowNumberOnly($event)">
										<span class="ps-2"
											*ngIf="formFieldAccess.reportedDateTime.create || formFieldAccess.reportedDateTime.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.reportedDateTime}}"><mat-icon>help_outline</mat-icon></span>

									</div>
									
									<div class="error"
										*ngIf="isFieldValid('reportedTime') && ( incidentSelectedTypeData.name=='Product')">
										{{(formIncidentControls.reportedTime.errors!=null)?formIncidentControls.reportedTime.errors.message:''}}
									</div>
									<div class="error"
										*ngIf="isFieldValid('reportedTime') && ( incidentSelectedTypeData.name!=='Product')">
										{{(formIncidentControls.reportedTime.errors!=null && formIncidentControls.reportedTime.errors.message=='Reported time invalid')?formIncidentControls.reportedTime.errors.message:''}}
									</div>
								</div>
							</div>

							<div class=""
								*ngIf="formFieldAccess.whereInStore.create || formFieldAccess.whereInStore.write">
								<div class="incidentPlace"
									*ngIf="formFieldAccess.whereInStore.create || formFieldAccess.whereInStore.write || formFieldAccess.whereInStore.view">
									<label class="label-name">Where in store <span
											*ngIf="!formFieldAccess.whereInStore.create && !formFieldAccess.whereInStore.write"
											class=" store-width">
											{{incidentForm.value.storeComments}}
										</span></label>
									<div class="data-view d-flex align-items-center">
										<!-- <textarea class="form-control textarea" autocomplete="off"  maxlength="250" formControlName="storeComments"></textarea> -->
										<input type="text" class="form-control storeComments customerName"
											autocomplete="off" maxlength="250" formControlName="storeComments"
											*ngIf="formFieldAccess.whereInStore.create || formFieldAccess.whereInStore.write">

										<span class="ps-2"
											*ngIf="formFieldAccess.whereInStore.create || formFieldAccess.whereInStore.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.whereInStore}}"><mat-icon>help_outline</mat-icon></span>
									</div>
								</div>
							</div>
							<div class=""
								*ngIf="formFieldAccess.injurySustained.create || formFieldAccess.injurySustained.write || formFieldAccess.injurySustained.view">
								<div class="incidentPlace"
									*ngIf="formFieldAccess.injurySustained.create || formFieldAccess.injurySustained.write || formFieldAccess.injurySustained.view">
									<label class="label-name">Injury sustained<span class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product'">*</span><span
											*ngIf="!formFieldAccess.injurySustained.create && !formFieldAccess.injurySustained.write"
											class=" labelValuepadd">
											{{incidentForm.value.injurySustained}}
										</span></label>
									<div class="data-view d-flex injuryDescription align-items-center">
										<textarea class="form-control textarea addressArea" autocomplete="off"
											maxlength="250" formControlName="injurySustained"
											[ngClass]="isFieldValid('injurySustained') && ( incidentSelectedTypeData.name=='Product')?'focus-border-error':''"
											*ngIf="formFieldAccess.injurySustained.create || formFieldAccess.injurySustained.write"></textarea>

										<span class="ps-2"
											*ngIf="formFieldAccess.injurySustained.create || formFieldAccess.injurySustained.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.injurySustained}}">
											<mat-icon>help_outline</mat-icon></span>
									</div>
									<div class="error"
										*ngIf="isFieldValid('injurySustained') && ( incidentSelectedTypeData.name=='Product')">
										{{(formIncidentControls.injurySustained.errors!=null)?formIncidentControls.injurySustained.errors.message:''}}
									</div>
								</div>

							</div>
							<div class=""
								*ngIf="formFieldAccess.circumstances.create || formFieldAccess.circumstances.write || formFieldAccess.circumstances.view">
								<div class="incidentPlace"
									*ngIf="formFieldAccess.circumstances.create || formFieldAccess.circumstances.write || formFieldAccess.circumstances.view">
									<label class="label-name">Circumstances<span class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product'">*</span><span
											*ngIf="!formFieldAccess.circumstances.create && !formFieldAccess.circumstances.write"
											class=" labelValuepadd">
											{{incidentForm.value.injuryCircumstances}}
										</span></label>
									<div class="data-view d-flex injuryDescription align-items-center">
										<textarea class="form-control textarea addressArea addressArea-182"
											autocomplete="off" maxlength="1500" formControlName="injuryCircumstances"
											[ngClass]="isFieldValid('injuryCircumstances') && ( incidentSelectedTypeData.name=='Product')?'focus-border-error':''" ></textarea><span class="ps-2"
											*ngIf="formFieldAccess.circumstances.create || formFieldAccess.circumstances.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.circumstances}}">
											<mat-icon>help_outline</mat-icon></span>
									</div>
									<div class="error"
										*ngIf="isFieldValid('injuryCircumstances') && ( incidentSelectedTypeData.name=='Product')">
										{{(formIncidentControls.injuryCircumstances.errors!=null)?formIncidentControls.injuryCircumstances.errors.message:''}}
									</div>
								</div>
							</div>
							<!-- isShowWitnessAvailable &&  -->

						</div>

						<div class="" *ngIf="incidentSelectedTypeData.name!='Product' && !isIncidentClosed">

							<div class="witnessMargin"
								[ngClass]="{'witnessMarginbottom' : incidentForm.value.witnessAvailable=='true' || incidentForm.value.witnessAvailable==true, 'witnessMarginbottomNew' : isRedacted}"
								*ngIf="formFieldAccess.witnessAvailable.create || formFieldAccess.witnessAvailable.write">
								<label class="label-name">Witness<span class="manditory"
										*ngIf="(formFieldAccess.witnessAvailable.create || formFieldAccess.witnessAvailable.write) && !isIncidentClosed">*</span><span
										*ngIf="!isRedacted">&nbsp;</span><span *ngIf="isRedacted"
										class="redacted-background">REDACTED</span>
									<span class="ps-1"
										*ngIf="(formFieldAccess.witnessAvailable.create || formFieldAccess.witnessAvailable.write) && !isRedacted"
										placement="auto" [autoClose]="true"
										triggers="manual"
										#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.witnessAvailable}}">
										<mat-icon>help_outline</mat-icon></span></label>
								<div class="data-view" *ngIf="!isRedacted">
									<input type="radio" class="form-check-input" name="witnessAvailable" value="true"
										formControlName="witnessAvailable" (change)="witnessAvailableChange('Y')"> <span
										class="me-3 radioText">Yes</span>
									<input type="radio" class="form-check-input" name="witnessAvailable" value="false"
										formControlName="witnessAvailable" (change)="witnessAvailableChange('N')"> <span
										class="radioText">No</span>
								</div>
								<div class="error"
									*ngIf="isFieldValid('witnessAvailable') && ( incidentSelectedTypeData.name!='Product')">
									{{(formIncidentControls.witnessAvailable.errors!=null)?formIncidentControls.witnessAvailable.errors.message:''}}
								</div>
							</div>
						</div>
						<div class=""
							*ngIf="incidentForm.value.witnessAvailable=='true' || incidentForm.value.witnessAvailable==true">
							<div class=""
								*ngIf="formFieldAccess.witnessAvailable.create || formFieldAccess.witnessAvailable.write">
								<!-- 	<label class="label-name" *ngIf="incidentForm.value.witnessList.length>0">Witnesses
									<span class="ps-2" *ngIf="formFieldAccess.witnessAvailable.create || formFieldAccess.witnessAvailable.write">
										<mat-icon placement="auto"
											ngbTooltip="{{toolTipData.witnesses}}">help_outline</mat-icon></span>
								</label> -->
							</div>
							<ng-template #witnessbox>
								<app-witness-form [witnessData]="witnessInputData"
									(witnessSaveEvent)="saveWitness($event)"></app-witness-form>
							</ng-template>

							<div class=""
								*ngIf="incidentForm.value.witnessList.length>0 && (formFieldAccess.witnessAvailable.create || formFieldAccess.witnessAvailable.write) && !isIncidentClosed">

								<div class="witnessBoxFlex" *ngIf="!isRedacted">
									<div class="pe-0 witnessBoxView" [ngClass]="{'d-none' : wt.witnessDeleted !== 0}"
										*ngFor="let wt of incidentForm.value.witnessList;index as i;">
										<div class="view-box" *ngIf="wt.witnessDeleted==0">
											<div class="witness-title1 text-break"
												*ngIf="formFieldAccess.witnessName.create || formFieldAccess.witnessName.write || formFieldAccess.witnessName.view">
												<label
													class="witness-title ">{{(!isRedacted)?wt.witnessName:'REDACTED'}}</label>
												<div class=""></div>
											</div>


                                            <div [ngClass]="{'d-flex': wt.witnessContactNumber == null || wt.witnessContactNumber == ''}">
											<div class="witnessInfo"
												*ngIf="formFieldAccess.witnesscontactNumber.create || formFieldAccess.witnesscontactNumber.write || formFieldAccess.witnesscontactNumber.view">
												<label class="" class="witness-title">Phone:</label>
											</div>
											<div class="witnessInfoValue text-break"
												*ngIf="formFieldAccess.witnesscontactNumber.create || formFieldAccess.witnesscontactNumber.write || formFieldAccess.witnesscontactNumber.view">
												<div class="p-0">
													<span *ngIf="wt.witnessContactNumber !== null && wt.witnessContactNumber !== ''">{{(!isRedacted)?wt.witnessContactNumber:'REDACTED'}}</span>
													<span *ngIf="wt.witnessContactNumber == null || wt.witnessContactNumber == ''">{{(!isRedacted)?'&nbsp;&nbsp;-':'REDACTED'}}</span>
												</div>
											</div>
											</div>
											<div [ngClass]="{'d-flex': wt.witnessContactEmail == null || wt.witnessContactEmail == ''}">
											<div class="witnessInfo"
												*ngIf="formFieldAccess.witnessEmail.create || formFieldAccess.witnessEmail.write || formFieldAccess.witnessEmail.view">
												<label class="" class="witness-title">Email:</label>
											</div>
											<div class="witnessInfoValue text-break"
												*ngIf="formFieldAccess.witnessEmail.create || formFieldAccess.witnessEmail.write || formFieldAccess.witnessEmail.view">
												<div class="p-0">
													<span *ngIf="wt.witnessContactEmail !== null && wt.witnessContactEmail !== ''">{{(!isRedacted)?wt.witnessContactEmail:'REDACTED'}}</span>
													<span *ngIf="wt.witnessContactEmail == null || wt.witnessContactEmail == ''">{{(!isRedacted)?'&nbsp;&nbsp;-':'REDACTED'}}</span>
												</div>
											</div>
											</div>

											<div [ngClass]="{'d-flex': wt.witnessAddress == null || wt.witnessAddress == ''}">
											<div class=" witnessInfo"
												*ngIf="formFieldAccess.witnessAddress.create || formFieldAccess.witnessAddress.write || formFieldAccess.witnessAddress.view">
												<label class="p-0" class="witness-title"
													[ngClass]="{'mb-0' : isRedacted}">Address:</label>

											</div>
											<div class=" witnessInfoValue text-break"
												*ngIf="formFieldAccess.witnessAddress.create || formFieldAccess.witnessAddress.write || formFieldAccess.witnessAddress.view">
												<div class="p-0">
													<span *ngIf="wt.witnessAddress !== null && wt.witnessAddress !== ''">{{(!isRedacted)?wt.witnessAddress:'REDACTED'}}</span>
													<span *ngIf="wt.witnessAddress == null || wt.witnessAddress == ''">{{(!isRedacted)?'&nbsp;&nbsp;-':'REDACTED'}}</span>
												</div>
											</div>
											</div>
											<!--<div class=" witnessInfo" *ngIf="formFieldAccess.witnessStatement.create || formFieldAccess.witnessStatement.write || formFieldAccess.witnessStatement.view">
												<label class="p-0" class="witness-title">Statement:</label>

											</div>
											 <div class=" witnessInfoValue text-break" *ngIf="formFieldAccess.witnessStatement.create || formFieldAccess.witnessStatement.write || formFieldAccess.witnessStatement.view">
												<div class="p-0">{{wt.witnessStatement}}</div>
											</div> -->


											<div class="d-flex editDelWitness" *ngIf="!isRedacted">
												<div class="witness-edit" (click)="editWitness(witnessbox,i)">Edit
												</div>
												<div class="witness-edit witnessDel"
													(click)="deleteConfirmBox(DeleteWitnessconformbox,i)">Delete
												</div>
												<!-- <button class="mb-2 d-flex justify-content-start witness-edit witnessDel" data-toggle="modal" data-target="#deleteModal" >Delete</button> -->

											</div>
										</div>

									</div>
								</div>


							</div>
							<div class="" [ngClass]="{'buttonMargin' : incidentForm.value.witnessList.length>0}"
								*ngIf="(formFieldAccess.witnessAvailable.create || formFieldAccess.witnessAvailable.write) && !isRedacted && !isIncidentClosed">
								<button type="button" class="next-btn-witness-add witnessBtn"
									(click)="openWitnessPopup(witnessbox,1)">Add a witness</button>
							</div>

						</div>

						<div *ngIf="(formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write || formFieldAccess.evidenceAvailable.view) && !isIncidentDetailsFormHidden">
							<div class=""
								*ngIf="formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write || formFieldAccess.evidenceAvailable.view">
								<div class="evidenceMargin" [ngClass]="{'evidenceMarginNew' : isRedacted}"
									*ngIf="formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write || formFieldAccess.evidenceAvailable.view">
									<!-- <label class="label-name" *ngIf="!incidentForm.value.evidenceAvailable">Evidence</label> -->
									<label class="label-name d-flex align-items-center"
										*ngIf="formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write">CCTV/Photos<span
											class="manditory"
											*ngIf="(formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write) && !isIncidentClosed">*</span><span
											*ngIf="isRedacted" class=""
											[ngClass]="isRedacted?' redacted-background':''">REDACTED</span>
										<span class="ps-2"
											*ngIf="(formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write) && !isRedacted"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.evidences}}">
											<mat-icon>help_outline</mat-icon></span></label>
									<div class="data-view"
										*ngIf="(formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write) && !isRedacted">
										<input type="radio" class="form-check-input" name="evidenceAvailable"
											value="true" formControlName="evidenceAvailable"
											(change)="evidenceAvailableChange('Y')"> <span
											class="me-3 radioText">Yes</span>
										<input type="radio" class="form-check-input" name="evidenceAvailable"
											value="false" formControlName="evidenceAvailable"
											(change)="evidenceAvailableChange('N')"> <span class="radioText">No</span>
									</div>
									<div class="error" *ngIf="isFieldValid('evidenceAvailable')">
										{{(formIncidentControls.evidenceAvailable.errors!=null)?formIncidentControls.evidenceAvailable.errors.message:''}}
									</div>
								</div>
							</div>

							<div class="" [ngClass]="{'row' : !isRedacted}"
								*ngIf="incidentForm.value.evidenceAvailable==true || incidentForm.value.evidenceAvailable=='true'">
								<div class="evidenceMargin evidenceMargin-20"
									[ngClass]="{'evidenceMarginNew' : isRedacted}"
									*ngIf="formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write || formFieldAccess.evidenceAvailable.view">
									<!-- <label class="label-name" *ngIf="!incidentForm.value.evidenceAvailable">Evidence</label> -->

									<div class="data-view d-flex align-items-center"
										*ngIf="(formFieldAccess.evidenceAvailable.create || formFieldAccess.evidenceAvailable.write) && !isRedacted">
										<mat-checkbox class="aligncheckbox" autocomplete="off"
											formControlName="noFootageAvailable"></mat-checkbox>
										<!-- <input type="checkbox" class="form-check-input" name="isVideo"
											value="true" formControlName="isVideo" > -->
										<span class="cctv_text">No CCTV Available</span>

									</div>
								</div>
							</div>

							<div class="evidanceReport"
								*ngIf="(incidentForm.value.evidenceAvailable=='true' || incidentForm.value.evidenceAvailable==true) && !isIncidentDetailsFormHidden && !isRedacted">
								<div class=""
									*ngIf="formFieldAccess.evidenceTakenBy.create || formFieldAccess.evidenceTakenBy.write || formFieldAccess.evidenceTakenBy.view">
									<label class="label-name">CCTV/Photos taken by<span class="manditory"
										*ngIf="(formFieldAccess.evidenceTakenBy.create || formFieldAccess.evidenceTakenBy.write) && !isIncidentClosed">*</span> <span
											*ngIf="!formFieldAccess.evidenceTakenBy.create && !formFieldAccess.evidenceTakenBy.write"
											class="labelValuepadd">
											{{incidentForm.value.evidenceTakenBy}}
										</span></label>
									<div class="data-view d-flex injuryDescription align-itms-center">
										<input type="text" class="form-control evidencetakenby customerName"
											autocomplete="off" maxlength="45" formControlName="evidenceTakenBy"
											(keypress)="common.textBoxAllowAplpabetsSpaceOnly($event)"
											[ngClass]="isFieldValid('evidenceTakenBy')?'focus-border-error':''"
											*ngIf="formFieldAccess.evidenceTakenBy.create || formFieldAccess.evidenceTakenBy.write">

										<span class="ps-2"
											*ngIf="formFieldAccess.evidenceTakenBy.create || formFieldAccess.evidenceTakenBy.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.evidenceTakenByName}}"><mat-icon>help_outline</mat-icon></span>
									</div>
									<div class="error" *ngIf="isFieldValid('evidenceTakenBy')">
										{{(formIncidentControls.evidenceTakenBy.errors!=null)?formIncidentControls.evidenceTakenBy.errors.message:''}}
									</div>
								</div>
							</div>
							<div class="evidanceReport"
								*ngIf="(incidentForm.value.evidenceAvailable=='true' || incidentForm.value.evidenceAvailable==true)  && !isRedacted">
								<div class=""
									*ngIf="formFieldAccess.evidences.create || formFieldAccess.evidences.write || formFieldAccess.evidences.view">
									<!-- 	<label class="label-name d-flex align-items-center">Evidence
										<span class="ps-2">
											<mat-icon placement="auto"
												ngbTooltip="{{toolTipData.injuredPersonFullName}}">help_outline</mat-icon></span></label> -->
									<div class="data-view mobilemarginRight">
										<app-file-drag-drop [data]="fileInPutData"
											(fileDragEvent)="getUploadFile($event)"
											*ngIf="(incidentForm.value.evidenceAvailable=='true' || incidentForm.value.evidenceAvailable==true) && (formFieldAccess.evidences.create || formFieldAccess.evidences.write)"></app-file-drag-drop>
									</div>
								</div>
							</div>

							<div class="evidanceReport evidanceReport1" *ngIf="!isIncidentDetailsFormHidden">
								<div class=""
									*ngIf="formFieldAccess.otherComments.create || formFieldAccess.otherComments.write || formFieldAccess.otherComments.view">
									<label class="label-name">Other Comments<span
											*ngIf="!formFieldAccess.otherComments.create && !formFieldAccess.otherComments.write"
											class="labelValuepadd">
											{{incidentForm.value.otherComments}}
										</span></label>
									<div class="data-view d-flex injuryDescription align-items-center">
										<textarea class="form-control textarea addressArea" autocomplete="off"
											maxlength="500" formControlName="otherComments"
											*ngIf="formFieldAccess.otherComments.create || formFieldAccess.otherComments.write"></textarea>

										<span class="ps-2"
											*ngIf="formFieldAccess.otherComments.create || formFieldAccess.otherComments.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()" ngbTooltip="{{toolTipData.otherComments}}">
											<mat-icon>help_outline</mat-icon></span>
									</div>
								</div>
							</div>



						</div>

					</div>
					<!-- incident details view -->
					<div class="" [hidden]="isIncidentDetailsViewHidden">
						<app-incident-details-view *ngIf="!isIncidentDetailsViewHidden"
							[incidentDetailsData]="incidentViewData"></app-incident-details-view>
					</div>

					<div class="" *ngIf="incidentSelectedTypeData.name=='Product'">
						<div class="personal-info-title"
							[ngClass]="{'personal-info-title-reducted' : isRedacted || isIncidentClosed}">3. Product
							Details</div>
						<div class="product-form" [hidden]="isProductDetailsFormHidden">


							<div class=""
								*ngIf="formFieldAccess.productId.create || formFieldAccess.productId.write || formFieldAccess.productId.view">
								<div
									class="form-group mb-0 auditFormsLbl auditFormsLbl1 incidentContents auditFormsLbl-new incidentContents incidentContents-mobile">
									<label class="label-name">Product Description/ID<span class="manditory">*</span>
										<span
											*ngIf="!formFieldAccess.productId.create && !formFieldAccess.productId.write"
											class="labelValuepadd">
											{{incidentForm.value.productId+'-'+incidentForm.value.productDescription}}
										</span></label>
									<div class="data-view d-grid align-items-center"
										[ngClass]="isFieldValid('productIDView')  || isFieldValid('productId')?'focus-border-error-new':''">


										<!-- readonly="readonly"  -->
										<div class="d-flex align-items-center">
											<mat-form-field [floatLabel]="'never'"
												class="example-full-width incidentformfield incidentformfield-mobile width-100"
												*ngIf="formFieldAccess.productId.create || formFieldAccess.productId.write">
												<input type="text" aria-label="Product ID" matInput
													formControlName="productIDView"
													class="form-control placeholder-class mat-form-field-mobile-input pdIdInput"
													(keyup)="productIDType($event)" maxlength="100"
													(focus)="focusinmethod()" (focusout)="focusoutmethod()"
													placeholder="Type 3 letters to auto suggest the Article ID"
													[matAutocomplete]="auto" id="autoCompleteTrigger"
													#autoCompleteTrigger="matAutocompleteTrigger">

												<mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
													(optionSelected)="onProductIDSelectionChanged($event)">
													<mat-option *ngFor="let option of productIdData;"
														[value]="option.articleId +'-'+option.articleDescription">
														{{option.articleId+'-'+option.articleDescription}}
													</mat-option>
												</mat-autocomplete>
											</mat-form-field>

											<span class="ps-1 pb-4"
												*ngIf="formFieldAccess.productId.create || formFieldAccess.productId.write"
												placement="auto" [autoClose]="true"
												triggers="manual"
												#t="ngbTooltip" (click)="t.open()"
												ngbTooltip="{{toolTipData.productId}}"><mat-icon>help_outline</mat-icon></span>
										</div>
										<div class="error mg-top15"
											*ngIf="isFieldValid('productIDView') || isFieldValid('productId')">

											{{(formIncidentControls.productId.errors!=null)?formIncidentControls.productId.errors.message:''}}

										</div>
									</div>

								</div>

							</div>



							<div class="d-flex productDetail mobilewrap-flex">
								<div class="productDetailmobDiv"
									*ngIf="formFieldAccess.productAge.create || formFieldAccess.productAge.write || formFieldAccess.productAge.view">
									<label class="label-name">Product Age<span class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product'">*</span><span
											*ngIf="!formFieldAccess.productAge.create && !formFieldAccess.productAge.write"
											class="labelValuepadd">
											{{incidentForm.value.productAge}}
										</span></label>
									<!-- 
											(keypress)="common.allowNumberOnly($event)" -->
									<div class="data-view d-flex align-items-center">
										<input type="text" class="form-control product-age " autocomplete="off"
											maxlength="3" formControlName="productAge"
											(keypress)="common.allowNumberOnly($event)"
											*ngIf="formFieldAccess.productAge.create || formFieldAccess.productAge.write"
											[ngClass]="isFieldValid('productAge')?'focus-border-error':''">

										<span class="ps-1 pe-1"
											*ngIf="formFieldAccess.productAge.create || formFieldAccess.productAge.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.productAge}}"><mat-icon>help_outline</mat-icon></span>
									</div>
									<div class="error" *ngIf="isFieldValid('productAge')">
										{{(formIncidentControls.productAge.errors!=null)?formIncidentControls.productAge.errors.message:''}}
									</div>
								</div>
								<div class="productDetailmobDiv"
									*ngIf="formFieldAccess.productAge.create || formFieldAccess.productAge.write || formFieldAccess.productAge.view">
									
									<div class="data-view d-flex mt-2 align-items-center">

										<select class="form-control product-age mobilemarginRight" formControlName="productAgeType"
											*ngIf="formFieldAccess.productAge.create || formFieldAccess.productAge.write"
											[ngClass]="isProductAgeTypeFieldValid('productAgeType','productAge')?'focus-border-error':''">
											<option value="" class="d-none"></option>
											<option value="weeks">
												Weeks</option>
											<option value="months">
												Months</option>
											<option value="years">
												Years</option>
										</select>

										<!-- <span class="ps-1 pe-1" *ngIf="formFieldAccess.productAge.create || formFieldAccess.productAge.write" placement="auto"
												ngbTooltip="{{toolTipData.productAge}}"><mat-icon >help_outline</mat-icon></span> -->
									</div>
									<div class="error"
										*ngIf="isProductAgeTypeFieldValid('productAgeType','productAge')">
										{{(formIncidentControls.productAgeType.errors!=null)?formIncidentControls.productAgeType.errors.message:''}}
									</div>
								</div>

							</div>
							<div class="d-flex productDetail mobilewrap-flex">
								<div class="productDetailmobDiv"
									*ngIf="formFieldAccess.natureOfProductFault.create || formFieldAccess.natureOfProductFault.write || formFieldAccess.natureOfProductFault.view">
									<label class="label-name">Nature of product fault<span class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product'">*</span><span
											*ngIf="!formFieldAccess.natureOfProductFault.create && !formFieldAccess.natureOfProductFault.write"
											class=" store-width">
											{{incidentForm.value.faultCode}}
										</span></label>
									<div class="data-view d-flex align-items-center">
										<!-- 	<select class="form-control product-age " formControlName="faultCode" *ngIf="formFieldAccess.natureOfProductFault.create || formFieldAccess.natureOfProductFault.write">
											<option value="" class="d-none"></option>
											<option *ngFor="let pf of natureOfProductFaultData;" value="{{pf.faultId}}">
												{{pf.faultDescription}}</option>
										</select> -->
										<input type="text" class="form-control product-age product-fault"
											autocomplete="off" maxlength="35" formControlName="faultCode"
											*ngIf="formFieldAccess.natureOfProductFault.create || formFieldAccess.natureOfProductFault.write"
											[ngClass]="isFieldValid('faultCode')?'focus-border-error':''">

										<span class="ps-1"
											*ngIf="formFieldAccess.natureOfProductFault.create || formFieldAccess.natureOfProductFault.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.natureOfProductFault}}"><mat-icon>help_outline</mat-icon></span>
									</div>
									<div class="error" *ngIf="isFieldValid('faultCode')">
										{{(formIncidentControls.faultCode.errors!=null)?formIncidentControls.faultCode.errors.message:''}}
									</div>
								</div>
							</div>
							<div class="d-flex productDetail mobilewrap-flex">
								<div class="productDetailmobDiv"
									*ngIf="formFieldAccess.batchNo.create || formFieldAccess.batchNo.write || formFieldAccess.batchNo.view">
									<label class="label-name">Batch number/Serial number<span
											*ngIf="!formFieldAccess.batchNo.create && !formFieldAccess.batchNo.write"
											class="labelValuepadd">
											{{incidentForm.value.batchNo}}
										</span></label>
									<div class="data-view d-flex align-items-center">
										<textarea class="form-control textarea product-age" autocomplete="off"
											maxlength="25" formControlName="batchNo"
											*ngIf="formFieldAccess.batchNo.create || formFieldAccess.batchNo.write"></textarea>

										<span class=" ps-1 pe-1"
											*ngIf="formFieldAccess.batchNo.create || formFieldAccess.batchNo.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.batchNo}}"><mat-icon>help_outline</mat-icon></span>
									</div>
								</div>



								<div class="productDetailmobDiv"
									*ngIf="formFieldAccess.recommendedAge.create || formFieldAccess.recommendedAge.write || formFieldAccess.recommendedAge.view">
									<label class="label-name r_age">Recommended age </label>
									<div class="data-view d-flex align-items-center">
										<span
											class="product-age-label p_agLabel">{{incidentForm.value.recommendedAge}}</span>
										<!-- <input type="text" class="form-control product-age" autocomplete="off"
											maxlength="3" formControlName="recommendedAge"
											(keypress)="common.allowNumberOnly($event)" readonly="readonly"> -->
										<!-- <span class="ps-2"><mat-icon placement="auto"
												ngbTooltip="{{toolTipData.injuredPersonFullName}}">help_outline</mat-icon></span> -->
									</div>
								</div>

							</div>


							<div class="d-flex productDetail mobilewrap-flex">
								<div class="productDetailmobDiv"
									*ngIf="formFieldAccess.productReturnToStore.create || formFieldAccess.productReturnToStore.write || formFieldAccess.productReturnToStore.view">
									<label class="label-name">When returned to store<span
											*ngIf="!formFieldAccess.productReturnToStore.create || !formFieldAccess.productReturnToStore.write"
											class="labelValuepadd">{{incidentForm.value.productReturnToStore |
											date:'dd-MM-yyyy'}}</span> </label>
									<div class="data-view d-flex align-items-center dataiconrel max-width-260"
										*ngIf="formFieldAccess.productReturnToStore.create || formFieldAccess.productReturnToStore.write">
										<input type="text" class="form-control product-age" autocomplete="off"
											formControlName="productReturnToStore"
											[minDate]="productReturnToStoreMinDate"
											[maxDate]="productReturnToStoreMaxDate"
											(bsValueChange)="productReturnToStoreChange($event)" autocomplete="off"
											bsDatepicker [bsConfig]="common.bsConfig" #productReturnToStore>

										<div class="data-icon2" (click)="productReturnToStore.click()">
											<img src="assets/healthsafetyimages/field-icon.svg">
										</div>
										<span class="ps-1 pe-1"
											*ngIf="formFieldAccess.productReturnToStore.create || formFieldAccess.productReturnToStore.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.productReturnToStore}}"><mat-icon>help_outline</mat-icon></span>
									</div>
								</div>
								<div class="productDetailmobDiv mt-2"
									*ngIf="formFieldAccess.productReturnToHeadOffice.create || formFieldAccess.productReturnToHeadOffice.write || formFieldAccess.productReturnToHeadOffice.view">
									<label class="label-name">When returned to Head Office<span
											*ngIf="!formFieldAccess.productReturnToHeadOffice.create || !formFieldAccess.productReturnToHeadOffice.write"
											class="labelValuepadd">{{incidentForm.value.productReturnToHeadOffice |
											date:'dd-MM-yyyy'}}</span></label>
									<div class="data-view d-flex align-items-center dataiconrel max-width-260"
										*ngIf="formFieldAccess.productReturnToHeadOffice.create || formFieldAccess.productReturnToHeadOffice.write">
										<input type="text" class="form-control product-age" autocomplete="off"
											formControlName="productReturnToHeadOffice"
											[minDate]="productReturnToHeadOfficeMinDate"
											[maxDate]="productReturnToHeadOfficeMaxDate" autocomplete="off" bsDatepicker
											[bsConfig]="common.bsConfig" #productReturnToHeadOffice>
										<div class="data-icon2" (click)="productReturnToHeadOffice.click()">
											<img src="assets/healthsafetyimages/field-icon.svg">
										</div>
										<span class="ps-2"
											*ngIf="formFieldAccess.productReturnToHeadOffice.create || formFieldAccess.productReturnToHeadOffice.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.productReturnToHeadOffice}}"><mat-icon>help_outline</mat-icon></span>
									</div>
								</div>

							</div>
							<!-- isProductDetailsFormHidden -->
							<!-- <span>
							{{formFieldAccess.proofOfPurchase.create +"formFieldAccess.proofOfPurchase.create "}}
						</span>
						<span>
							{{isProductDetailsFormHidden+"isProductDetailsFormHidden"}}
						</span> -->
							<div class=""
								*ngIf="(formFieldAccess.proofOfPurchase.create || formFieldAccess.proofOfPurchase.write) && !isProductDetailsFormHidden">
								<div class="">
									<!-- <label class="label-name">Proof of purchase attached</label> -->

									<div class="data-view mobilemarginRight" *ngIf="!isProductDetailsFormHidden">
										<app-file-drag-drop [data]="proofOfPurchaseFileInPutData"
											(fileDragEvent)="getUploadFile($event)"
											*ngIf="(!isProductDetailsFormHidden) && (formFieldAccess.proofOfPurchase.create ||  formFieldAccess.proofOfPurchase.write)"></app-file-drag-drop>
									</div>
								</div>
							</div>
							<div class="">
								<div class="mtop-30"
									*ngIf="formFieldAccess.problemReportedBefore.create || formFieldAccess.problemReportedBefore.write || formFieldAccess.problemReportedBefore.view">
									<label class="label-name">This problem has been reported before<span
											class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product'">*</span><span
											*ngIf="!formFieldAccess.problemReportedBefore.create && !formFieldAccess.problemReportedBefore.write"
											class="labelValuepadd">
											{{incidentForm.value.problemReportedBefore}}
										</span></label>
									<div class="data-view d-flex align-items-center">
										<textarea class="form-control textarea addressArea" autocomplete="off"
											maxlength="250" formControlName="problemReportedBefore"
											*ngIf="formFieldAccess.problemReportedBefore.create || formFieldAccess.problemReportedBefore.write"
											[ngClass]="isFieldValid('problemReportedBefore') && ( incidentSelectedTypeData.name=='Product')?'focus-border-error':''"></textarea>

										<span class="ps-1"
											*ngIf="formFieldAccess.problemReportedBefore.create || formFieldAccess.problemReportedBefore.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.problemReportedBefore}}"><mat-icon>help_outline</mat-icon></span>
									</div>
									<div class="error"
										*ngIf="isFieldValid('problemReportedBefore') && ( incidentSelectedTypeData.name=='Product')">
										{{(formIncidentControls.problemReportedBefore.errors!=null)?formIncidentControls.problemReportedBefore.errors.message:''}}
									</div>
								</div>
							</div>


						</div>
						<div class="product-form-view" [hidden]="isProductDetailsViewHidden">
							<app-product-details-view *ngIf="!incidentData.isAdd && !isProductDetailsViewHidden"
								[productDetailsData]="productDetailsView"></app-product-details-view>
						</div>
					</div>

					<!-- *ngIf="!incidentData.isAdd"  -->
					<div class="" *ngIf="isAssginHandlingShow">
						<div class="personal-info-title"
							[ngClass]="{'personal-info-title-reducted' : isRedacted || isIncidentClosed}"
							*ngIf="formFieldAccess.handlers.create || formFieldAccess.handlers.write">
							{{(incidentSelectedTypeData.name=='Product')?'4. ':'3. '}}Issue Handling</div>
						<!--[hidden]="handlingissuesFormHidden"-->
						<div [hidden]="handlingissuesFormHidden">
							<div class="d-flex">
								<div class="issueTracker"
									*ngIf="formFieldAccess.csdNumber.create || formFieldAccess.csdNumber.write ">
									<label class="label-name">CSD Tracking Number<span class="manditory"
											*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product' && loginEmployeeRoleCode !== 'PC'">*</span>
										<span class="labelValuepadd"
											*ngIf="!formFieldAccess.csdNumber.create && !formFieldAccess.csdNumber.write">{{incidentForm.value.csdNumber}}</span></label>
									<div class="data-view d-flex align-items-center">
										<input type="text"
											class="form-control {{(incidentSelectedTypeData.name!='Product')?'customerName':'csdtracknumber'}}"
											maxlength="15" formControlName="csdNumber"
											[ngClass]="isFieldValidcsdNumber('csdNumber')?'focus-border-error':''"
											(change)="csdNumberChange($event)">

										<span class="ps-2 pe-2"
											*ngIf="formFieldAccess.csdNumber.create || formFieldAccess.csdNumber.write"
											placement="auto" [autoClose]="true"
											triggers="manual"
											#t="ngbTooltip" (click)="t.open()"
											ngbTooltip="{{toolTipData.csdNumber}}"><mat-icon>help_outline</mat-icon></span>
									</div>
									<div class="error" *ngIf="isFieldValidcsdNumber('csdNumber')">
										{{(formIncidentControls.csdNumber.errors!=null)?formIncidentControls.csdNumber.errors.message:''}}
									</div>
								</div>

							</div>
							<div class=" assignHandler"
								*ngIf="formFieldAccess.handlers.create || formFieldAccess.handlers.write">
								<div class="">
									<div class="auditFormsLbl auditFormsLbl1 incidentContents auditFormsLbl-new auditFormsLbl-AH"
										[ngClass]="isFieldValidHandlingTeam('handlingTeams','assigneeSearchValue') && (this.selectedUsers.length==0)?'focus-border-error-new':''">
										<label class="label-name">Assign Handler<span class="manditory"
												*ngIf="!isRedacted && incidentSelectedTypeData.name=='Product' && loginEmployeeRoleCode !== 'PC'">*</span></label>
										<div class="data-view d-flex data-view-relative">

											<mat-form-field
												class="example-full-width incidentformfieldhandling bottomassign"
												[floatLabel]="'never'">
												<input type="text" placeholder="Select from list" aria-label="" matInput
													[matAutocomplete]="auto2" formControlName="assigneeSearchValue"
													(keyup)="assignChange($event)" pattern="^\w+([\.-]?\w+)*@smythstoys\.com$"
													class="assignhandletext  form-control " id="autoCompleteTrigger1"
													#autoCompleteTrigger1="matAutocompleteTrigger">
												<!-- <mat-hint>Enter text to find users by name</mat-hint>  [displayWith]="displayFn"   autoActiveFirstOption-->
												<mat-autocomplete #auto2="matAutocomplete"
													matAutocompletePosition="below"
													[displayWith]="displayFnAssignHandle" autoActiveFirstOption>
													<mat-option *ngFor="let user of assignGenericFilterData"
														[value]="selectedUsers" class="mat-option-design"
														[ngClass]="{'Disabled' : user.isDeleteAccess==false }">
														<div (click)="optionClicked($event, user)">
															<mat-checkbox
																[ngClass]="{'Disabled' : user.isDeleteAccess==false }"
																[checked]="user.selected"
																(change)="toggleSelection($event,user)"
																(click)="$event.stopPropagation()">
																<span for="auto">{{ user.emailAddress
																	}}</span>
															</mat-checkbox>
														</div>
													</mat-option>
												</mat-autocomplete>
											</mat-form-field>
											<button [ngClass]="{'disableaddmail' : incidentForm.get('assigneeSearchValue').invalid}" class="addemail-btn" (click)="addAssigneeMail()">Add Email</button>

											<span class="ps-2 assingIcon pt-2"
												*ngIf="formFieldAccess.handlers.create || formFieldAccess.handlers.write"
												placement="auto" [autoClose]="true"
												triggers="manual"
												#t="ngbTooltip" (click)="t.open()"
												ngbTooltip="{{toolTipData.handlingTeam}}"><mat-icon>help_outline</mat-icon></span>
												<div class="businessMail" *ngIf="incidentForm.get('assigneeSearchValue').invalid">Please add only business email Id.</div>
											</div>
										<div class="error handling-error"
											*ngIf="isFieldValidHandlingTeam('handlingTeams','assigneeSearchValue') && (this.selectedUsers.length==0) && (incidentForm.get('assigneeSearchValue').valid)">
											{{(formIncidentControls.handlingTeams.errors!=null)?formIncidentControls.handlingTeams.errors.message:''}}
										</div>
									</div>
								</div>
							</div>
							<div class="box-assign-row">
								<div>
									<label class="label-name"
										*ngIf="(formFieldAccess.handlers.create || formFieldAccess.handlers.write) && selectedUsers.length>0">Handlers:</label>
								</div>
								<div class="handling-mrg-top10">
									<table *ngIf="selectedUsers.length>0" class="border-table">
										<thead>
											<tr>
												<!-- <th>S.No</th> -->
												<th>Email Id</th>
												<th *ngIf="incidentData.isAdd==false" class="noleftborder">Notified On
												</th>
												<th class="border-none"></th>
											</tr>
										</thead>
										<tbody>
											<tr *ngFor="let asn of selectedUsers;index as k;">
												<!-- <td class="text-center">{{k+1}}</td> -->
												<td> {{asn.emailAddress}}</td>
												<td *ngIf="incidentData.isAdd==false" class="noleftborder">
													{{((asn.createdOn!='' &&
													asn.createdOn!=null)?asn.createdOn+'(UTC)':'-')}}</td>
												<td class="text-center border-none"><mat-icon class="remove-btn-mat"
														*ngIf="(formFieldAccess.handlers.create || formFieldAccess.handlers.write) && asn.isDeleteAccess"
														(click)="removeAssignConfirm(asn,DeleteWitnessconformbox,k)">clear</mat-icon>
												</td>
											</tr>
										</tbody>
									</table>
									<!-- 	<p class="assign-handler-list m-0" *ngFor="let asn of selectedUsers;index as k;">
									
									<span> {{asn.emailAddress+'   '+((asn.createdOn!='' && asn.createdOn!=null)?" -   Notified On:  "+asn.createdOn+'(UTC)':'')}} </span>
									<span class="remove-btn"
										*ngIf="formFieldAccess.handlers.create || formFieldAccess.handlers.write"
										(click)="removeAssignConfirm(asn,DeleteWitnessconformbox,k)"> remove</span>
								</p> -->
								</div>
							</div>
						</div>
						<!-- <div [hidden]="handlingissuesViewHidden">
							<app-issues-handling-view *ngIf="!incidentData.isAdd && !handlingissuesViewHidden"
								[issuesHandlingData]="issuesHandlingViewData"
								(issuesHandlingEdit)="editHandlingIssues($event)"></app-issues-handling-view>
						</div> -->

					</div>
					<!-- asign handler view -->

					<div class="" *ngIf="isAssginHandlingShow">
						<div class="personal-info-title"
							[ngClass]="{'personal-info-title-reducted' : isRedacted || isIncidentClosed}"
							*ngIf="!incidentData.isAdd && !handlingissuesViewHidden">

							<div>{{(incidentSelectedTypeData.name=='Product')?'4.':'3. '}}Issue Handling</div>
						</div>
						<div [hidden]="handlingissuesViewHidden">
							<app-issues-handling-view [issuesHandlingData]="issuesHandlingViewData"
								(issuesHandlingEdit)="editHandlingIssues($event)"></app-issues-handling-view>
						</div>

					</div>

					<div class="priorityBox"
					[ngClass]="{'priorityBoxpadbottom' : (!formFieldAccess.priority.create && !formFieldAccess.priority.write) || isIncidentClosed}"
					*ngIf="(formFieldAccess.priority.create || formFieldAccess.priority.write || formFieldAccess.priority.view) && incidentSelectedTypeData.name=='Product'">
					<div class="priorityBoxtitle d-flex align-items-center">Priority<span class="manditory"
							*ngIf="(formFieldAccess.priority.create || formFieldAccess.priority.write) && !isIncidentClosed">*</span><span
							class="selectPriority1 d-flex align-items-center"
							*ngIf="(!formFieldAccess.priority.create && !formFieldAccess.priority.write) || isIncidentClosed">
							:&nbsp;<span class="editminicircledot {{this.incidentEditData.priorityInfo.colorCode}}1"
								[style.background-color]="this.incidentEditData.priorityInfo.colorCode"></span>{{this.productDetailsView.showData.priority}}</span>
					</div>
					<div class=""
						*ngIf="(formFieldAccess.priority.create || formFieldAccess.priority.write || formFieldAccess.priority.view) && incidentSelectedTypeData.name=='Product'">
						<div class="data-view d-flex align-items-center" *ngIf="!isIncidentClosed">
							<mat-form-field class="example-full-width priorityselectbox mat-form-field-mobile mat-form-field-mobile-priority"
								*ngIf="formFieldAccess.priority.create || formFieldAccess.priority.write">
							
								<mat-select name="priorityCode" formControlName="priorityCode"
									class="mat-select form-control priority-form multselecticonnew"
									panelClass="myPanelClassMatselect" [disableOptionCentering]="true"
									[ngClass]="isFieldValid('priorityCode')?'focus-border-error':''">

									<mat-option *ngFor="let prt of priorityData;index as i;" value="{{prt.id}}"
										(click)="optionClick(prt.colorCode)">

										<span class="minicircleDot {{prt.colorCode}}1"
											[style.background-color]="prt.colorCode">&nbsp;</span>
										<span>&nbsp;&nbsp;{{prt.colorCode}}</span>

									</mat-option>

								</mat-select>
								<div class="absminicircledot {{optionData}}2" [style.background-color]="optionData">
								</div>
							</mat-form-field>

							<span class="ps-1 priorityMaticonadjust"
								*ngIf="(formFieldAccess.priority.create || formFieldAccess.priority.write) && !isIncidentClosed">
								<mat-icon [autoClose]="true"
								triggers="manual"
								#t="ngbTooltip" (click)="t.open()" [ngbTooltip]="priorityTable"
									tooltipClass="my-custom-class my-custom-class-new"
									container="body" placement="top">help_outline</mat-icon>
							</span>
							<ng-template #priorityTable>
								<div class="tooltipTemplateBox">
									<table>
										<thead>
											<tr>
												<th class="first-th">Code</th>
												<th class="second-th">Example</th>
										
											</tr>
										</thead>
										<tbody>
											<tr *ngFor="let x of priorityData;">
												<td [ngClass]="x.colorCode">{{x.colorCode}}</td>
												<td>{{x.description}}</td>
											</tr>
										</tbody>
									</table>

								</div>
							</ng-template>


						</div>
						<div class="error mb-0 mg-top" *ngIf="isFieldValid('priorityCode')">
							{{(formIncidentControls.priorityCode.errors!=null)?formIncidentControls.priorityCode.errors.message:''}}
						</div>
					</div>
				</div>
				</div>
				<div>
					<!-- <div class="addCommentbox"
						*ngIf="(isIncidentClosed && this.incidentForm.value.resolveActions.length>0) || !isIncidentClosed">
						<div class="" [ngClass]="{'boxlist' : !boxList}"
							*ngIf="this.incidentForm.value.resolveActions.length>0">
							<div *ngFor="let cmt of this.incidentForm.value.resolveActions;index as i;">
								<div *ngIf="i<=showMoreCommentCount">
									<div class="d-flex color pb-10">
										<div><img src="assets/healthsafetyimages/small_msg_icon.png" alt=""></div>
										<div class="wrapflex-form" *ngIf="!isRedacted">
											<div class="fw-600-bold  uname break-word">{{cmt.createdByName}}</div>
											<div class="wordwrap">{{cmt.addedDateTime+'(UTC)'}}</div>
										</div>
										<div *ngIf="isRedacted" class="redacted-background redacted-background-color">REDACTED</div>
									</div>

									<div class="lh-17 pb-10 break-word"
										*ngIf="formFieldAccess.actionTakenToResolve.view"><span class="fw-550">Incident
											prevention: </span>
										<span>{{(cmt.resolveAction!='')?cmt.resolveAction:'-'}}</span>
									</div>
									<div class="lh-17 pb-10 break-word" *ngIf="formFieldAccess.goodwillGesture.view">
										<span class="fw-550">Goodwill: </span>
										<span>{{(cmt.goodwill!='')?cmt.goodwill:'-'}}</span>
									</div>

									<div class="lh-17 pb-10 break-word" *ngIf="formFieldAccess.followUpCall.view">
										<span class="fw-550">Follow-up call: </span>
										{{(cmt.followUpCall!='')?cmt.followUpCall:'-'}}
									</div>
									<div class="lh-17 pb-20 break-word" *ngIf="formFieldAccess.actionTakenComment.view">
										{{(cmt.comments!='')?cmt.comments:'-'}}
									</div>
									<div class="line"></div>
								</div>

							</div>
						</div>
						<button (click)="showMoreCmd()"
							*ngIf="this.incidentForm.value.resolveActions.length>2 && boxList == true"
							class="add-comment-btn add-comment-btn1">Show More
							({{this.incidentForm.value.resolveActions.length - 2}})</button>
						<button (click)="showLessCmd()"
							*ngIf="this.incidentForm.value.resolveActions.length>2 && boxList == false"
							class="add-comment-btn add-comment-btn1">Show Less</button>

						<div class="addData" *ngIf="!isIncidentClosed && isActionTakenBoxShow">
							<div class="fw-600-bold newComment">Add a new comment</div>
							<div class="d-flex commentsDetail"
								*ngIf="formFieldAccess.actionTakenToResolve.create || formFieldAccess.actionTakenToResolve.write ">
								<div class="">
									<label class="label-name">Incident prevention</label>
									<div class="data-view d-flex align-items-center">

										<input type="text" class="form-control action-taken" autocomplete="off"
											formControlName="actionTakenToResolve" maxlength="500">
										<span class="ps-1" placement="auto" ngbTooltip="{{toolTipData.actionTaken}}">
											<mat-icon>help_outline</mat-icon></span>
									</div>
								</div>
							</div>
							<div class="d-flex commentsDetail" *ngIf="formFieldAccess.goodwillGesture.create || formFieldAccess.goodwillGesture.write">
								<div class="">
									<label class="label-name">Goodwill gesture</label>
									<div class="data-view d-flex align-items-center">
										<input type="text" class="form-control action-taken" autocomplete="off"
											formControlName="goodWillGuster" maxlength="500">
										<span class="ps-1" placement="auto" ngbTooltip="{{toolTipData.goodwillGesture}}">
											<mat-icon>help_outline</mat-icon></span>
									</div>
								</div>
							</div>
							<div class="d-flex commentsDetail" *ngIf="formFieldAccess.followUpCall.create || formFieldAccess.followUpCall.write">
								<div class="">
									<label class="label-name">Follow-up call</label>
									<div class="data-view d-flex align-items-center">
										<input type="text" class="form-control action-taken" autocomplete="off"
											formControlName="followUpCall" maxlength="250">
										<span class="ps-1" placement="auto" ngbTooltip="{{toolTipData.followUpCall}}">
											<mat-icon>help_outline</mat-icon></span>
									</div>
								</div>
							</div>
							<div class="" *ngIf="formFieldAccess.actionTakenComment.create || formFieldAccess.actionTakenComment.write">
								<div class="">
									<label class="label-name">Comments</label>
									<div class="data-view d-flex align-items-center">
										<textarea class="form-control textarea comment-area" autocomplete="off"
											maxlength="500" formControlName="actoinTakenComment"></textarea>
										<span class="ps-1" placement="auto"
											ngbTooltip="{{toolTipData.otherComments}}"><mat-icon>help_outline</mat-icon></span>
									</div>
								</div>
							</div>
							<div class="addbtn-box">
								<button
									*ngIf="(this.incidentForm.value.actionTakenToResolve == '' && this.incidentForm.value.goodWillGuster == '' && this.incidentForm.value.followUpCall == '' && this.incidentForm.value.actoinTakenComment=='') || isAlreadyAddProcess"
									type="button" class="add-comment-btn"
									[ngClass]="{'Disabled' : this.incidentForm.value.actionTakenToResolve == '' && this.incidentForm.value.goodWillGuster == ''  && this.incidentForm.value.followUpCall == '' && this.incidentForm.value.actoinTakenComment=='' }">Add
									a comment</button>
								<button type="button" class="add-comment-btn" (click)="addComment()"
									*ngIf=" (this.incidentForm.value.actionTakenToResolve != '' || this.incidentForm.value.goodWillGuster != ''  || this.incidentForm.value.followUpCall!='' || this.incidentForm.value.actoinTakenComment!='')  && !isAlreadyAddProcess">Add
									a comment</button>
							</div>
						</div>

					</div> -->

				
					<!-- <div class="legal-info legal-margin"
						*ngIf="!incidentData.isAdd && (isLegalInfoBoxShow || isLegalInfoView) && incidentEditData.incidentStatus!='Draft'"
						[ngClass]="{'legal-info-form' : !incidentData.isAdd && isShowInsuranceVerification}">

						<div *ngIf="isShowInsuranceVerification" class="mtop-legal-info">
							<app-insurance-verification-form *ngIf='isShowInsuranceVerification'
								[insuranceVerificationData]="insuranceVerificationData" [scrollCount]="scrollCount"
								(insuranceVerificationEvent)="saveInsuranceVerification($event)"></app-insurance-verification-form>
						</div>
						<div *ngIf="isLegalInfoView && !isShowInsuranceVerification" class="mtop-legal-info">
							<app-insurance-verification-view *ngIf="!incidentData.isAdd && isLegalInfoView"
								[insuranceVerificationData]="insuranceVerificationData"></app-insurance-verification-view>
						</div>
					</div>
					<div class="legal-info legal-info-other legal-margin"
					*ngIf="!incidentData.isAdd && (isOtherInfoBoxShow) && incidentEditData.incidentStatus!='Draft'"
					[ngClass]="{'legal-info-form' : !incidentData.isAdd && isOtherInfoBoxShow}">
						<div *ngIf="isOtherInfoBoxShow" class="mtop-other-info">
							<app-other-info-form [otherinfoData]="otherinfoData"
								(otherinfoevent)="setotherInfovalue($event)"></app-other-info-form>
						</div>
					</div>
					<div class="submitbox mt-3 marginbottom"
					*ngIf="!incidentData.isAdd && (isShowInsuranceVerification || isOtherInfoBoxShow) && !isIncidentClosed">
					<div class="">

						<button type="button" class="next-btn-black" (click)="saveLegalInfo()">Save</button>
					</div>
				</div> -->
				</div>
			</div>
		</form>
	</section>
	<footer class="d-flex align-items-center footerBtns" id="Footer">
		<div class="d-flex submitbox mobilewrap-flex">
			<div class="">
				<button type="button"
					*ngIf="(incidentSelectedTypeData.name=='Product'  )
      	&& (this.incidentForm['controls'].injuredPersonFullName.status=='INVALID' 
      	|| this.incidentForm['controls'].ageType.status=='INVALID'
      	|| this.incidentForm['controls'].ageValue.status=='INVALID'
      	|| this.incidentForm['controls'].injuredPersonContactNumber.status=='INVALID' || this.incidentForm['controls'].priorityCode.status=='INVALID' || this.incidentForm['controls'].injurySustained.status=='INVALID' || this.incidentForm['controls'].injuryCircumstances.status=='INVALID'  || this.incidentForm['controls'].eventDate.status=='INVALID' || this.incidentForm['controls'].eventTime.status=='INVALID' || this.incidentForm['controls'].reportedDate.status=='INVALID' || this.incidentForm['controls'].reportedTime.status=='INVALID' || this.incidentForm['controls'].problemReportedBefore.status=='INVALID'||   this.incidentForm['controls'].productId.status=='INVALID' || this.incidentForm['controls'].productAge.status=='INVALID' || this.incidentForm['controls'].faultCode.status=='INVALID' || 
this.incidentForm['controls'].evidenceAvailable.status=='INVALID') || (loginEmployeeRoleCode=='CS' && (this.selectedUsers.length==0 || this.incidentForm['controls'].csdNumber.status=='INVALID')) &&  !isIncidentClosed && !isShowInsuranceVerification && loginEmployeeRoleCode!='Buyer'"
					class="submit-btn-disable" (click)="onSubmit()">
					{{(incidentData.isAdd)?'Submit':((incidentData.incidentRowData.incidentStatus=='Draft')?'Submit':'Update')}}</button>
				<button type="button" class="submit-btn-enable submitBtn"
					*ngIf="(incidentSelectedTypeData.name=='Product' )
      	&& this.incidentForm['controls'].injuredPersonFullName.status=='VALID' 
      	&& this.incidentForm['controls'].ageType.status=='VALID'
      	&& this.incidentForm['controls'].ageValue.status=='VALID'
      	&& this.incidentForm['controls'].injuredPersonContactNumber.status=='VALID'
      	 && this.incidentForm['controls'].priorityCode.status=='VALID' &&   this.incidentForm['controls'].injurySustained.status=='VALID' && this.incidentForm['controls'].injuryCircumstances.status=='VALID' 
      	 && this.incidentForm['controls'].reportedDate.status=='VALID' && this.incidentForm['controls'].reportedTime.status=='VALID' && this.incidentForm['controls'].productId.status=='VALID' && this.incidentForm['controls'].problemReportedBefore.status=='VALID' && this.incidentForm['controls'].eventDate.status=='VALID' && this.incidentForm['controls'].eventTime.status=='VALID' && this.incidentForm['controls'].productAge.status=='VALID'  && this.incidentForm['controls'].faultCode.status=='VALID' &&
this.incidentForm['controls'].evidenceAvailable.status=='VALID'  && (loginEmployeeRoleCode=='CS' && (this.selectedUsers.length>0 && this.incidentForm['controls'].csdNumber.status=='VALID')) && !isIncidentClosed  && !isShowInsuranceVerification && loginEmployeeRoleCode!='Buyer'"
					(click)="onSubmit()">
					{{(incidentData.isAdd)?'Submit':((incidentData.incidentRowData.incidentStatus=='Draft')?'Submit':'Update')}}</button>

				<!-- && this.incidentForm['controls'].productId.status=='VALID' -->
				<button type="button" class="submit-btn-enable submitBtn"
					*ngIf="(incidentSelectedTypeData.name=='Product' )
      	&& this.incidentForm['controls'].injuredPersonFullName.status=='VALID' 
      	&& this.incidentForm['controls'].ageType.status=='VALID'
      	&& this.incidentForm['controls'].ageValue.status=='VALID'
      	&& this.incidentForm['controls'].injuredPersonContactNumber.status=='VALID'
      	
      	 && this.incidentForm['controls'].priorityCode.status=='VALID' &&   this.incidentForm['controls'].injurySustained.status=='VALID' && this.incidentForm['controls'].injuryCircumstances.status=='VALID' && this.incidentForm['controls'].eventDate.status=='VALID' && this.incidentForm['controls'].eventTime.status=='VALID'
      	 && this.incidentForm['controls'].reportedDate.status=='VALID' && this.incidentForm['controls'].productId.status=='VALID' && this.incidentForm['controls'].reportedTime.status=='VALID' && this.incidentForm['controls'].problemReportedBefore.status=='VALID' && this.incidentForm['controls'].productAge.status=='VALID'  && this.incidentForm['controls'].faultCode.status=='VALID' &&
this.incidentForm['controls'].evidenceAvailable.status=='VALID'  && (loginEmployeeRoleCode!='CS') && !isIncidentClosed  && !isShowInsuranceVerification && loginEmployeeRoleCode!='Buyer'"
					(click)="onSubmit()">{{(incidentData.isAdd)?'Submit':((incidentData.incidentRowData.incidentStatus=='Draft')?'Submit':'Update')}}</button>
				<!-- customer submit btn -->
				<button type="button" class="submit-btn-disable"
					*ngIf="(incidentSelectedTypeData.name=='Customer'  )
      	&& (this.incidentForm['controls'].injuredPersonFullName.status=='INVALID' 
      	|| this.incidentForm['controls'].ageType.status=='INVALID'
      	|| this.incidentForm['controls'].ageValue.status=='INVALID'
      	|| this.incidentForm['controls'].injuredPersonContactNumber.status=='INVALID' || this.incidentForm['controls'].eventDate.status=='INVALID' || this.incidentForm['controls'].eventTime.status=='INVALID'  || this.incidentForm['controls'].witnessAvailable.status=='INVALID'  || this.incidentForm['controls'].evidenceAvailable.status=='INVALID'  ) &&  !isIncidentClosed  && !isShowInsuranceVerification && loginEmployeeRoleCode!='Buyer'"
					(click)="onSubmit()">{{(incidentData.isAdd)?'Submit':((incidentData.incidentRowData.incidentStatus=='Draft')?'Submit':'Update')}}</button>

				<button type="button" class="submit-btn-enable" (click)="onSubmit()"
					*ngIf="(incidentSelectedTypeData.name=='Customer'  )
      	&& this.incidentForm['controls'].injuredPersonFullName.status=='VALID' 
      	&& this.incidentForm['controls'].ageType.status=='VALID'
      	&& this.incidentForm['controls'].ageValue.status=='VALID'
      	&& this.incidentForm['controls'].injuredPersonContactNumber.status=='VALID'  && this.incidentForm['controls'].eventDate.status=='VALID' && this.incidentForm['controls'].eventTime.status=='VALID'  && this.incidentForm['controls'].witnessAvailable.status=='VALID'  && this.incidentForm['controls'].evidenceAvailable.status=='VALID' 
      	 &&  !isIncidentClosed  && !isShowInsuranceVerification && loginEmployeeRoleCode!='Buyer'">
		 {{(incidentData.isAdd)?'Submit':((incidentData.incidentRowData.incidentStatus=='Draft')?'Submit':'Update')}}
		</button>
				<!-- constractor & employee submit button -->
				<button type="button" class="submit-btn-disable"
					*ngIf="( incidentSelectedTypeData.name=='Contractor' || incidentSelectedTypeData.name=='Employee'  )
      	&& (this.incidentForm['controls'].injuredPersonFullName.status=='INVALID' 
      	|| this.incidentForm['controls'].ageType.status=='INVALID'
      	|| this.incidentForm['controls'].ageValue.status=='INVALID'
      	|| this.incidentForm['controls'].injuredPersonContactNumber.status=='INVALID'
      	|| this.incidentForm['controls'].injuredPersonEmail.status=='INVALID' || this.incidentForm['controls'].eventDate.status=='INVALID' || this.incidentForm['controls'].eventTime.status=='INVALID'  || this.incidentForm['controls'].witnessAvailable.status=='INVALID'  || this.incidentForm['controls'].evidenceAvailable.status=='INVALID'  ) &&  !isIncidentClosed  && !isShowInsuranceVerification && loginEmployeeRoleCode!='Buyer'"
					(click)="onSubmit()">
					{{(incidentData.isAdd)?'Submit':((incidentData.incidentRowData.incidentStatus=='Draft')?'Submit':'Update incident report')}}
				</button>

				<button type="button" class="submit-btn-enable" (click)="onSubmit()"
					*ngIf="(incidentSelectedTypeData.name=='Contractor' || incidentSelectedTypeData.name=='Employee'  )
      	&& this.incidentForm['controls'].injuredPersonFullName.status=='VALID' 
      	&& this.incidentForm['controls'].ageType.status=='VALID'
      	&& this.incidentForm['controls'].ageValue.status=='VALID'
      	&& this.incidentForm['controls'].injuredPersonContactNumber.status=='VALID'
      	&& this.incidentForm['controls'].injuredPersonEmail.status=='VALID' && this.incidentForm['controls'].eventDate.status=='VALID' && this.incidentForm['controls'].eventTime.status=='VALID'  && this.incidentForm['controls'].witnessAvailable.status=='VALID'  && this.incidentForm['controls'].evidenceAvailable.status=='VALID' 
      	 &&  !isIncidentClosed  && !isShowInsuranceVerification && loginEmployeeRoleCode!='Buyer'">
		 {{(incidentData.isAdd)?'Submit':((incidentData.incidentRowData.incidentStatus=='Draft')?'Submit':'Update')}}
		</button>
			</div>
			<div class=""
				*ngIf="(incidentData.isAdd) || (incidentData.isAdd==false && incidentData.incidentRowData.incidentStatus=='Draft')  && !isIncidentClosed">
				<button type="button" class="saveBtn saveDraft" (click)="onSaveDraft(1)"
					*ngIf="(incidentData.isAdd) || (incidentData.isAdd==false && incidentData.incidentRowData.incidentStatus=='Draft')  && !isIncidentClosed">Save
					Draft</button>
			</div>

			<div class="d-flex align-items-center"
				*ngIf="(incidentData.isAdd) || (incidentData.isAdd==false && incidentData.incidentRowData.incidentStatus=='Draft') && !isIncidentClosed">

				<!-- <span class="delete-btn-disable word-wrap" *ngIf="!isDraft">Discard Draft </span>  *ngIf="isDraft"-->
				<span class="delete-btn-enable word-wrap"
					*ngIf="(incidentData.isAdd) || (incidentData.isAdd==false && incidentData.incidentRowData.incidentStatus=='Draft') && !isIncidentClosed"
					(click)="deleteDraftConform(DeleteWitnessconformbox,'Draft')">Discard Draft</span>
			</div>
			<div class="d-flex align-items-center"
				*ngIf="(incidentData.isAdd==false && incidentData.incidentRowData.incidentStatus!='Draft')">
				<button class="btn-download" *ngIf="isDownload">

					<a href="{{this.utils.API.GENERATE_PDF_URL+'/'+this.incidentEditData.id+'/insurance/'+loginEmployeeId}}"
						target="_blank" *ngIf="incidentEditData && (loginEmployeeRoleCode=='Insurance') && isDownload"
						class=" d-flex justify-content-start  align-items-center atagButton word-wrap"
						title="Incident details with insurance">
						<span>Download the incident</span>
					</a>
					<a href="{{this.utils.API.GENERATE_PDF_URL+'/'+this.incidentEditData.id+'/privacy/'+loginEmployeeId}}"
						target="_blank"
						*ngIf="incidentEditData  && (loginEmployeeRoleCode=='PC' || loginEmployeeRoleCode=='Privacy' || loginEmployeeRoleCode=='HR') && isDownload"
						class=" d-flex justify-content-start  align-items-center atagButton word-wrap"
						title="Download the incident">
						<span>Download the incident</span>
					</a>
				</button>
				<!-- <button class="btn-download" [matMenuTriggerFor]="menu"
						 >Download the incident</button>
				<mat-menu #menu="matMenu" class="newCoursePopup mat-menu-header">
						<div class=" p-0 coursePopup" >
							

								<a href="{{this.utils.API.GENERATE_PDF_URL+'/'+this.incidentEditData.id+'/insurance/'+loginEmployeeId}}" target="_blank" *ngIf="incidentEditData && (loginEmployeeRoleCode=='Insurance')"
									class=" d-flex justify-content-start  align-items-center courseMenu courseMenu1 word-wrap" title="Incident details with insurance" mat-menu-item>
									<span mat-menu-item>For Insurance</span>
						       </a>
								<a href="{{this.utils.API.GENERATE_PDF_URL+'/'+this.incidentEditData.id+'/privacy/'+loginEmployeeId}}" target="_blank" *ngIf="incidentEditData"
								class=" d-flex justify-content-start  align-items-center courseMenu courseMenu1 word-wrap" title="For Others" mat-menu-item>
								<span mat-menu-item >For Others</span>
							</a>
								
							
						</div>
					
					</mat-menu>-->
			</div>

		</div>
	</footer>
</div>



<ng-template #DeleteWitnessconformbox>
	<div class="popup-view">
		<form #confirm="ngForm" class="example-form popupform">
			<div class="header-popup">
				Delete <span *ngIf="deleteType=='Witness'" class="deleteTitle"> Witness</span>
				<span *ngIf="deleteType=='Draft'" class="deleteTitle"> Draft</span>
				<span *ngIf="deleteType=='Assignee'" class="deleteTitle"> Assignee</span>
			</div>
			<div class="whitepopupbox">
				<div class="confirmText">
					Are you sure want to delete?
				</div>
				<div class="d-flex justify-content-end confirmBtnDiv">
					<button mat-button class="btn btn-sm btn-outline-secondary close-btn saveDraft"
						mat-dialog-close>Cancel</button>
					<button mat-button class="btn btn-sm btn-outline-secondary close-btn saveDraft  cform"
						mat-dialog-close (click)="deleteConfirmed()">Confirm</button>
				</div>
			</div>
		</form>
	</div>

</ng-template>

<ng-template #historyconformbox>
	<div class="popup-view">
		<form #confirm="ngForm" class="example-form popupform">
			<div class="header-popup">
				History
			</div>
			<div class="whitepopupbox">
				<div class="confirmText">
					<app-history-table *ngIf="isShowTable" [tableData]="historyTableData"></app-history-table>
				</div>
				<div class="d-flex justify-content-end confirmBtnDiv">
					<button mat-button class="btn btn-sm btn-outline-secondary close-btn saveDraft"
						mat-dialog-close>Cancel</button>
					<!-- <button mat-button class="btn btn-sm btn-outline-secondary close-btn saveDraft  cform"
						mat-dialog-close (click)="deleteConfirmed()">Confirm</button> -->
				</div>
			</div>
		</form>
	</div>

</ng-template>